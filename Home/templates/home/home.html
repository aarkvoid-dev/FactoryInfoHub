{% extends 'home/base.html' %}
{% load static %}
{% load humanize %}

{% block extra_css %}
<!-- Swiper CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

<style>
.video-container {
    height: 50vh;
    min-height: 250px;
    max-height: 500px;
    background: #000;
    overflow: hidden;
    position: relative;
}

.video-container video {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    min-width: 100%;
    min-height: 100%;
    width: auto;
    height: auto;
}

.video-controls {
    position: absolute;
    bottom: 20px;
    right: 20px;
    z-index: 10;
    display: flex;
    gap: 10px;
    background: rgba(0, 0, 0, 0.7);
    padding: 10px;
    border-radius: 8px;
}

.video-controls button {
    opacity: 0.7;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    cursor: pointer;
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.3);
    width: 40px;
    height: 40px;
    border-radius: 50%;
}

.video-controls button:hover {
    opacity: 1;
    transform: scale(1.1);
    background: rgba(255, 255, 255, 0.3);
}

.video-container:fullscreen {
    width: 100vw;
    height: 100vh;
    max-height: none;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: black;
}

.video-container:fullscreen video {
    position: static;
    transform: none;
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
}

/* Fix the "Font gets small" issue */
:fullscreen {
    font-size: 16px !important; 
}

.featureIcon {
    transition: transform 0.3s ease;
}

.featureIcon:hover {
    transform: translateX(10px);
}

body {
    overflow-x: hidden;
    width: 100%;
    position: relative;
}

.hero.-type-9 {
    overflow: hidden;
    width: 100%;
}

/* Mobile responsive styles */
@media (max-width: 768px) {
    .video-container {
        height: 60vh;
        min-height: 200px;
        max-height: 400px;
    }

    .video-controls {
        bottom: 10px;
        right: 10px;
        padding: 5px;
    }

    .video-controls button {
        width: 32px;
        height: 32px;
        font-size: 12px;
    }
}

/* Section-Wide Border Styling */
.section-border-container {
  border: 1px solid #E7E8F2;
  background-color: #ffffff;
  position: relative;
}

/* Positioning Arrows on the edges */
.section-slider-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 10;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: white;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    width: 36px;
    height: 36px;
    border-radius: 50%;
}

.section-slider-nav:hover {
  background-color: #3554D1 !important;
  color: white !important;
}

/* Optional: make arrows slightly smaller on mobile */
@media (max-width: 768px) {
    .section-slider-nav {
        width: 30px;
        height: 30px;
    }
    .section-slider-nav i {
        font-size: 10px;
    }
}

.section-slider-nav.-prev { left: 5px; }
.section-slider-nav.-next { right: 5px; }

/* Adjusting Swiper padding to make room for arrows */
.px-40 {
  padding-left: 40px;
  padding-right: 40px;
}

/* Smooth Rounded Corners */
.rounded-16 {
  border-radius: 16px;
}
.blogCard__badge {
    width: 35%;
    height: 10%;
}
/* Global Mobile Typography Fix */
html { font-size: 14px; }
@media (min-width: 768px) { html { font-size: 16px; } }

/* Hero Section Adjustments */
.hero__title {
    font-size: 1.8rem !important;
    line-height: 1.2 !important;
}
.hero__text {
    font-size: 0.95rem !important;
}

@media (min-width: 768px) {
    .hero__title { font-size: 3.5rem !important; }
}

/* Video Responsive Height */
.video-container {
    height: 35vh; /* shorter on mobile */
    min-height: 200px;
}

@media (min-width: 768px) {
    .video-container { height: 50vh; }
}

/* Circular Categories Scaling */
.size-130 {
    width: 90px !important;
    height: 90px !important;
}

@media (min-width: 768px) {
    .size-130 {
        width: 130px !important;
        height: 130px !important;
    }
}

/* Feature Icon Cards */
.featureIcon {
    padding: 25px 20px !important;
}

/* Section Spacing */
.layout-pt-xl { padding-top: 50px !important; }
.layout-pb-xl { padding-bottom: 50px !important; }

@media (min-width: 768px) {
    .layout-pt-xl { padding-top: 120px !important; }
    .layout-pb-xl { padding-bottom: 120px !important; }
}

/* Force 2 Columns on very small screens for categories */
@media (max-width: 400px) {
    .base-2 {
        flex: 0 0 50% !important;
        max-width: 50% !important;
    }
}

/* Factory Card Scaling */
.tourCard__title { font-size: 16px !important; }
.tourCard__content { padding: 15px !important; }

/* Prevent image stretching */
.img-ratio {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Border container padding */
.section-border-container .px-40 {
    padding-left: 15px !important;
    padding-right: 15px !important;
}
@media (min-width: 768px) {
    .section-border-container .px-40 {
        padding-left: 40px !important;
        padding-right: 40px !important;
    }
}

/* Ensure each slide has at least a minimum width */
.js-section-slider .swiper-slide {
    min-width: 120px;
    width: auto;
}

/* Adjust video row height on mobile */
.min-vh-50-md {
    min-height: 50vh;
}
</style>
{% endblock %}

{% block content %}
    <!-- Hero Slider -->
    <section data-anim="fade" class="hero -type-9">
      <div class="hero__slider js-section-slider" data-gap="0" data-slider-cols="xl-1 lg-1 md-1 sm-1 base-1" data-pagination="js-main-slider-pagination">
        <div class="swiper-wrapper">

          <div class="swiper-slide">
            <div class="hero__bg">
              <img src="{% static 'img/hero/9/3.jpg' %}" alt="background">
            </div>

            <div class="container">
              <div class="hero__content">
                <div class="row items-center justify-between">
                  <div class="col-xl-7 col-lg-8">
                    <div class="hero__subtitle text-18 fw-500 text-white mb-10">Start With Us</div>

                    <h1 class="hero__title text-white">
                      Weaving Quality. <br class="lg:d-none">
                      Delivering Trust.
                    </h1>

                    <div class="hero__text text-white mt-10">
                      Premium textile manufacturing with innovation, precision,<br class="lg:d-none"> and global standards..
                    </div>

                    <div class="hero__button mt-30">
                      <button class="button -md -outline-white text-white">
                        View Tour
                        <i class="icon-arrow-top-right ml-10"></i>
                      </button>
                    </div>
                  </div>

                  <div class="col-lg-4">
                    <div class="hero__image">
                      <img src="{% static 'img/hero/9/image.svg' %}" alt="image">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- other slides (unchanged) -->
          <div class="swiper-slide">
            <div class="hero__bg">
              <img src="{% static 'img/hero/9/4.jpg' %}" alt="background">
            </div>

            <div class="container">
              <div class="hero__content">
                <div class="row items-center justify-between">
                  <div class="col-xl-7 col-lg-8">
                    <div class="hero__subtitle text-18 fw-500 text-white mb-10">Start With Us</div>

                    <h1 class="hero__title text-white">
                      From Fiber to Fabric,<br class="lg:d-none">
                       Perfected
                    </h1>

                    <div class="hero__text text-white mt-10">
                      Innovative textile solutions for fashion,<br class="lg:d-none"> industry, and global markets.
                    </div>

                    <div class="hero__button mt-30">
                      <button class="button -md -outline-white text-white">
                        View Tour
                        <i class="icon-arrow-top-right ml-10"></i>
                      </button>
                    </div>
                  </div>

                  <div class="col-lg-4">
                    <div class="hero__image">
                      <img src="{% static 'img/hero/9/image.svg' %}" alt="image">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="swiper-slide">
            <div class="hero__bg">
              <img src="{% static 'img/hero/9/5.jpg' %}" alt="background">
            </div>

            <div class="container">
              <div class="hero__content">
                <div class="row items-center justify-between">
                  <div class="col-xl-7 col-lg-8">
                    <div class="hero__subtitle text-18 fw-500 text-white mb-10">Start With Us</div>

                    <h1 class="hero__title text-white">
                      Iceland's legendary<br class="lg:d-none">
                      Golden Circle
                    </h1>

                    <div class="hero__text text-white mt-10">
                      Enjoy a full-day bus tour of Iceland's legendary Golden Circle.<br class="lg:d-none">
                      Soak in the warm thermal waters of the Secret Lagoon.
                    </div>

                    <div class="hero__button mt-30">
                      <button class="button -md -outline-white text-white">
                        View Tour
                        <i class="icon-arrow-top-right ml-10"></i>
                      </button>
                    </div>
                  </div>

                  <div class="col-lg-4">
                    <div class="hero__image">
                      <img src="{% static 'img/hero/9/image.svg' %}" alt="image">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="swiper-slide">
            <div class="hero__bg">
              <img src="{% static 'img/hero/9/6.jpg' %}" alt="background">
            </div>

            <div class="container">
              <div class="hero__content">
                <div class="row items-center justify-between">
                  <div class="col-xl-7 col-lg-8">
                    <div class="hero__subtitle text-18 fw-500 text-white mb-10">Start With Us</div>

                    <h1 class="hero__title text-white">
                      Iceland's legendary<br class="lg:d-none">
                      Golden Circle
                    </h1>

                    <div class="hero__text text-white mt-10">
                      Enjoy a full-day bus tour of Iceland's legendary Golden Circle.<br class="lg:d-none">
                      Soak in the warm thermal waters of the Secret Lagoon.
                    </div>

                    <div class="hero__button mt-30">
                      <button class="button -md -outline-white text-white">
                        View Tour
                        <i class="icon-arrow-top-right ml-10"></i>
                      </button>
                    </div>
                  </div>

                  <div class="col-lg-4">
                    <div class="hero__image">
                      <img src="{% static 'img/hero/9/image.svg' %}" alt="image">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="swiper-slide">
            <div class="hero__bg">
              <img src="{% static 'img/hero/9/7.jpg' %}" alt="background">
            </div>

            <div class="container">
              <div class="hero__content">
                <div class="row items-center justify-between">
                  <div class="col-xl-7 col-lg-8">
                    <div class="hero__subtitle text-18 fw-500 text-white mb-10">Start With Us</div>

                    <h1 class="hero__title text-white">
                      Iceland's legendary<br class="lg:d-none">
                      Golden Circle
                    </h1>

                    <div class="hero__text text-white mt-10">
                      Enjoy a full-day bus tour of Iceland's legendary Golden Circle.<br class="lg:d-none">
                      Soak in the warm thermal waters of the Secret Lagoon.
                    </div>

                    <div class="hero__button mt-30">
                      <button class="button -md -outline-white text-white">
                        View Tour
                        <i class="icon-arrow-top-right ml-10"></i>
                      </button>
                    </div>
                  </div>

                  <div class="col-lg-4">
                    <div class="hero__image">
                      <img src="{% static 'img/hero/9/image.svg' %}" alt="image">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>

        <div class="container -pagination">
          <div class="hero__pagination js-main-slider-pagination"></div>
        </div>
      </div>
    </section>

    <!-- Category Slider -->
    <section class="layout-pt-xl">
      <div data-anim-wrap class="container">
        <div data-anim-child="slide-up" class="row y-gap-10 justify-between items-end">
          <div class="col-auto">
            <h2 class="text-30 md:text-24">Discover Something Different - Factory Categories</h2>
          </div>
          <div class="col-auto">
            <a href="{% url 'karkahan:factory_list' %}" class="buttonArrow d-flex items-center">
              <span>See all</span>
              <i class="icon-arrow-top-right text-16 ml-10"></i>
            </a>
          </div>
        </div>

        <div class="section-border-container mt-40 shadow-1 rounded-16">
          <div class="relative px-40 py-40 sm:px-20 sm:py-20" data-anim-child="slide-up delay-2">
            
            <div class="overflow-hidden js-section-slider" 
                data-slider-cols="xl-8 lg-5 md-4 sm-3 base-2" 
                data-gap="36" 
                data-nav-prev="js-cat-prev" 
                data-nav-next="js-cat-next">
              
              <div class="swiper-wrapper">
                {% for category in category_stats %}
                <div class="swiper-slide">
                  <a href="{% url 'karkahan:factory_list' %}?category={{ category.id }}" class="featureImage -type-1 text-center -hover-image-scale">
                    <div class="featureImage__image mx-auto rounded-full -hover-image-scale__image">
                      <img src="{% static 'img/features/6/' %}{{ forloop.counter }}.jpg" alt="image" class="size-130 object-cover rounded-full">
                    </div>
                    <h3 class="featureImage__title text-16 fw-500 mt-20">{{ category.name }}</h3>
                    <p class="text-14">{{ category.factory_count }}+ Factories</p>
                  </a>
                </div>
                {% endfor %}
              </div>
            </div>

            <button class="section-slider-nav -prev flex-center button -blue-1 bg-white shadow-1 size-40 rounded-full js-cat-prev">
              <i class="icon-arrow-left text-12"></i>
            </button>
            <button class="section-slider-nav -next flex-center button -blue-1 bg-white shadow-1 size-40 rounded-full js-cat-next">
              <i class="icon-arrow-right text-12"></i>
            </button>
            
          </div>
        </div>
      </div>
    </section>

    <!-- Location Slider -->
    <section class="bg-accent-1-05 layout-pt-xl">
      <div data-anim-wrap class="container">
        <div data-anim-child="slide-up" class="row y-gap-10 justify-between items-end">
          <div class="col-auto">
            <h2 class="text-30 md:text-24">Discover Something Different - Locations</h2>
          </div>

          <div class="col-auto">
            <a href="{% url 'karkahan:factory_list' %}" class="buttonArrow d-flex items-center ">
              <span>See all</span>
              <i class="icon-arrow-top-right text-16 ml-10"></i>
            </a>
          </div>
        </div>

        <div class="section-border-container mt-40 shadow-1 rounded-16">
          <div class="relative px-40 py-40 sm:px-20 sm:py-20" data-anim-child="slide-up delay-2">
            
            <div class="overflow-hidden js-section-slider" 
                data-slider-cols="xl-8 lg-5 md-4 sm-3 base-2" 
                data-gap="36" 
                data-nav-prev="js-loc-prev" 
                data-nav-next="js-loc-next"
                data-pagination="js-loc-pagination">
              
              <div class="swiper-wrapper">
                {% for city in city_stats %}
                <div class="swiper-slide">
                  <a href="{% url 'karkahan:factory_list' %}?city={{ city.id }}" class="featureImage -type-1 text-center -hover-image-scale">
                    <div class="featureImage__image mx-auto rounded-full -hover-image-scale__image">
                      <img src="{% static 'img/destinationCards/1/' %}{{ forloop.counter }}.png" alt="image" class="size-130 object-cover rounded-full">
                    </div>

                    <h3 class="featureImage__title text-16 fw-500 mt-20">{{ city.name }}</h3>
                    <p class="text-14">{{ city.factory_count }}+ Factories</p>
                  </a>
                </div>
                {% endfor %}
              </div>
            </div>

            <button class="section-slider-nav -prev flex-center button -blue-1 bg-white shadow-1 size-40 rounded-full js-loc-prev">
              <i class="icon-arrow-left text-12"></i>
            </button>
            <button class="section-slider-nav -next flex-center button -blue-1 bg-white shadow-1 size-40 rounded-full js-loc-next">
              <i class="icon-arrow-right text-12"></i>
            </button>

          </div>
        </div>
      </div>
    </section>

    <!-- Video Section (with fixed height) -->
    <section class="layout-pt-xl layout-pb-xl">
      <div class="container">
        <div class="row justify-center items-center min-vh-50-md">
          <div class="col-lg-10">
            <div class="video-container">
              <video id="mainVideo" class="w-full h-auto" autoplay loop muted playsinline>
                <source src="{{ home_page_video.video.url }}" type="video/mp4">
                Your browser does not support the video tag.
              </video>
              <div class="video-controls">
                <button id="muteBtn" class="video-control-btn" onclick="toggleMute()">
                  <i class="fas fa-volume-mute"></i>
                </button>
                <button id="fullscreenBtn" class="video-control-btn" onclick="toggleFullscreen()">
                  <i class="fas fa-expand"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Why Choose Us Cards -->
    <section data-anim="slide-up delay-2" class="relative">
      <div class="sectionBg -mx-30 bg-accent-1-05 rounded-24"></div>
      <div class="container">
        <div class="aboutSection -type-1">
          <div class="aboutSection__text text-center mb-12">
            <h2 class="text-30 md:text-24 fw-700">Why Choose FactoryInfoHub</h2>
            <p>Most viewed and all-time top-selling factory listings</p>
          </div>

          <div class="row y-gap-30">
            <div class="col-lg-4">
              <div class="featureIcon -type-1 px-40 py-40 rounded-24 bg-white shadow-1">
                <div class="featureIcon__icon">
                  <img src="{% static 'img/icons/1/ticket.svg' %}" alt="icon">
                </div>

                <h3 class="featureIcon__title text-18 fw-500 mt-30">Verified Factories</h3>
                <p class="featureIcon__text mt-10">All factories are verified and meet international standards.</p>
              </div>
            </div>

            <div class="col-lg-4">
              <div class="featureIcon -type-1 px-40 py-40 rounded-24 bg-white shadow-1">
                <div class="featureIcon__icon">
                  <img src="{% static 'img/icons/1/hot-air-balloon.svg' %}" alt="icon">
                </div>

                <h3 class="featureIcon__title text-18 fw-500 mt-30">Global Coverage</h3>
                <p class="featureIcon__text mt-10">Access to factories across multiple countries and regions.</p>
              </div>
            </div>

            <div class="col-lg-4">
              <div class="featureIcon -type-1 px-40 py-40 rounded-24 bg-white shadow-1">
                <div class="featureIcon__icon">
                  <img src="{% static 'img/icons/1/diamond.svg' %}" alt="icon">
                </div>

                <h3 class="featureIcon__title text-18 fw-500 mt-30">Quality Assurance</h3>
                <p class="featureIcon__text mt-10">High quality standards with detailed factory information.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Featured Factories Slider -->
    <section class="layout-pt-xl layout-pb-xl">
      <div data-anim-wrap class="container">
        <div data-anim-child="slide-up" class="row y-gap-10 justify-between items-center y-gap-10">
          <div class="col-auto">
            <h2 class="text-30">Featured Factory Listings</h2>
          </div>

          <div class="col-auto">
            <a href="{% url 'karkahan:factory_list' %}" class="buttonArrow d-flex items-center ">
              <span>See all</span>
              <i class="icon-arrow-top-right text-16 ml-10"></i>
            </a>
          </div>
        </div>

        <div data-anim-child="slide-up delay-2" class="relative pt-40 sm:pt-20">
          <div class="js-section-slider" data-gap="30" data-slider-cols="xl-3 lg-3 md-2 sm-1 base-1" data-nav-prev="js-slider1-prev" data-nav-next="js-slider1-next">
            <div class="swiper-wrapper">

              {% for factory in featured_factories %}
              <div class="swiper-slide">
                <a href="{{ factory.get_absolute_url }}" class="tourCard -type-3 -hover-image-scale">
                  <div class="tourCard__image ratio ratio-41:45 rounded-12 -hover-image-scale__image">
                    {% with primary_image=factory.get_primary_image %}
                      {% if primary_image %}           
                      <img src="{{ primary_image }}" alt="{{ factory.name }}" class="img-ratio rounded-12">
                      {% else %}
                      <img src="{% static 'img/tourCards/1/11.jpg' %}" alt="{{ factory.name }}" class="img-ratio rounded-12">
                      {% endif %}
                     {% endwith %}
                  </div>

                  <div class="tourCard__wrap">
                    <div class="tourCard__header d-flex justify-between items-center text-13 text-white">
                      <div class="d-flex items-center">
                        <i class="icon-building text-16 mr-5"></i>
                        {{ factory.category.name }}
                      </div>

                      <button class="tourCard__favorite">
                        <i class="icon-heart"></i>
                      </button>
                    </div>

                    <div class="tourCard__content">
                      <div>
                        <div class="tourCard__location d-flex items-center text-13 text-white">
                          <i class="icon-pin d-flex text-16 text-white mr-5"></i>
                          {{ factory.city.name }}, {{ factory.state.name }}
                        </div>

                        <h3 class="tourCard__title text-18 text-white fw-500 mt-5">
                          <span>{{ factory.name }}</span>
                        </h3>

                        <div class="tourCard__rating d-flex items-center text-13 mt-5">
                          <div class="d-flex items-center x-gap-5">
                            <i class="icon-star text-yellow-2 text-12"></i>
                            <i class="icon-star text-yellow-2 text-12"></i>
                            <i class="icon-star text-yellow-2 text-12"></i>
                            <i class="icon-star text-yellow-2 text-12"></i>
                            <i class="icon-star text-yellow-2 text-12"></i>
                          </div>
                          <span class="text-white ml-10">4.8 (269)</span>
                        </div>
                      </div>

                      <div class="text-right text-white">
                        <div class="text-13 lh-14">Est. Capacity</div>
                        <div class="text-18 fw-500">{{ factory.production_capacity|default:"10,000+ units/month" }}</div>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
              {% empty %}
              <div class="swiper-slide">
                <a href="{% url 'karkahan:factory_list' %}" class="tourCard -type-3 -hover-image-scale">
                  <div class="tourCard__image ratio ratio-41:45 rounded-12 -hover-image-scale__image">
                    <img src="{% static 'img/tourCards/1/11.jpg' %}" alt="image" class="img-ratio rounded-12">
                  </div>

                  <div class="tourCard__wrap">
                    <div class="tourCard__header d-flex justify-between items-center text-13 text-white">
                      <div class="d-flex items-center">
                        <i class="icon-building text-16 mr-5"></i>
                        Textile
                      </div>

                      <button class="tourCard__favorite">
                        <i class="icon-heart"></i>
                      </button>
                    </div>

                    <div class="tourCard__content">
                      <div>
                        <div class="tourCard__location d-flex items-center text-13 text-white">
                          <i class="icon-pin d-flex text-16 text-white mr-5"></i>
                          Mumbai, India
                        </div>

                        <h3 class="tourCard__title text-18 text-white fw-500 mt-5">
                          <span>Premium Textile Manufacturing Co.</span>
                        </h3>

                        <div class="tourCard__rating d-flex items-center text-13 mt-5">
                          <div class="d-flex items-center x-gap-5">
                            <i class="icon-star text-yellow-2 text-12"></i>
                            <i class="icon-star text-yellow-2 text-12"></i>
                            <i class="icon-star text-yellow-2 text-12"></i>
                            <i class="icon-star text-yellow-2 text-12"></i>
                            <i class="icon-star text-yellow-2 text-12"></i>
                          </div>
                          <span class="text-white ml-10">4.8 (269)</span>
                        </div>
                      </div>

                      <div class="text-right text-white">
                        <div class="text-13 lh-14">Est. Capacity</div>
                        <div class="text-18 fw-500">10,000+ units/month</div>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
              {% endfor %}

            </div>
          </div>

          <div class="navRegular mt-40 md:mt-30">
            <button class="navRegular__button bg-white js-slider1-prev">
              <i class="icon-arrow-left text-20"></i>
            </button>

            <button class="navRegular__button bg-white js-slider1-next">
              <i class="icon-arrow-right text-20"></i>
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Dashboard Cards -->
    <section class="relative layout-pt-xl layout-pb-xl">
      <div class="sectionBg -mx-30 bg-accent-1-05 rounded-24"></div>

      <div data-anim-wrap class="container">
        <div data-anim-child="slide-up" class="row justify-center text-center">
          <div class="col-auto">
            <h2 class="text-30 md:text-24 fw-700">Management Dashboard & Support</h2>
            <p class="text-muted">Quick access to expand your network and get assistance</p>
          </div>
        </div>

        <div class="row pt-40 md:pt-30 justify-center">

          <div data-anim-child="fade delay-2" class="col-lg-3 col-sm-6 mb-20">
            <a href="{% url 'karkahan:factory_create' %}" class="d-block text-center py-50 md:py-20 rounded-24 bg-white shadow-hover-1 transition-all">
              <div class="icon-box text-accent-1 mb-20">
                <i class="fas fa-industry fa-3x"></i>
              </div>
              <h3 class="text-20 lh-14 fw-700">Add Factory</h3>
              <p class="lh-15 px-20">Register a new production unit</p>
            </a>
          </div>

          <div data-anim-child="fade delay-3" class="col-lg-3 col-sm-6 mb-20">
            <a href="{% url 'workers:register_worker' %}" class="d-block text-center py-50 md:py-20 rounded-24 bg-white shadow-hover-1 transition-all">
              <div class="icon-box text-accent-1 mb-20">
                <i class="fas fa-users-cog fa-3x"></i>
              </div>
              <h3 class="text-20 lh-14 fw-700">Add Worker</h3>
              <p class="lh-15 px-20">List professional staff or labor</p>
            </a>
          </div>

          <div data-anim-child="fade delay-4" class="col-lg-3 col-sm-6 mb-20">
            <a href="{% url 'blog:post_create' %}" class="d-block text-center py-50 md:py-20 rounded-24 bg-white shadow-hover-1 transition-all">
              <div class="icon-box text-accent-1 mb-20">
                <i class="fas fa-pen-nib fa-3x"></i>
              </div>
              <h3 class="text-20 lh-14 fw-700">Create Blog</h3>
              <p class="lh-15 px-20">Share industry news and updates</p>
            </a>
          </div>

          <div data-anim-child="fade delay-5" class="col-lg-3 col-sm-6 mb-20">
            <a href="{% url 'contact' %}" class="d-block text-center py-50 md:py-20 rounded-24 bg-white shadow-hover-1 transition-all">
              <div class="icon-box text-accent-1 mb-20">
                <i class="fas fa-headset fa-3x"></i>
              </div>
              <h3 class="text-20 lh-14 fw-700">Support Hub</h3>
              <p class="lh-15 px-20">Contact us for any assistance</p>
            </a>
          </div>

        </div>
      </div>
    </section>

    <!-- Blog Section -->
    {% if latest_posts %}
    <section class="layout-pt-xl layout-pb-xl">
      <div data-anim-wrap class="container">
        <div data-anim-child="slide-up" class="row justify-between items-end y-gap-10">
          <div class="col-auto">
            <h2 class="text-30 md:text-24">Latest Blog Articles</h2>
          </div>

          <div class="col-auto">
            <a href="{% url 'blog:post_list' %}" class="buttonArrow d-flex items-center ">
              <span>See all</span>
              <i class="icon-arrow-top-right text-16 ml-10"></i>
            </a>
          </div>
        </div>

        <div data-anim-child="slide-up delay-2" class="row y-gap-30 pt-40 sm:pt-20">

          {% for post in latest_posts %}
          <div class="col-lg-4 col-md-6">
            <a href="{% url 'blog:post_detail' post.slug %}" class="blogCard -type-1">
              <div class="blogCard__image ratio ratio-41:30">
                {% if post.images.first %}
                <img src="{{ post.images.first.image.url }}" alt="{{ post.title }}" class="img-ratio rounded-12">
                {% else %}
                <img src="{% static 'img/blogCards/1/1.png' %}" alt="{{ post.title }}" class="img-ratio rounded-12">
                {% endif %}
                <div class="blogCard__badge">{{ post.category.name|default:'Industry' }}</div>
              </div>

              <div class="blogCard__content mt-30">
                <div class="blogCard__info text-14">
                  <div class="lh-13">{{ post.created_at|date:"F d, Y" }}</div>
                  <div class="blogCard__line"></div>
                  <div class="lh-13">By {{ post.author.get_full_name|default:post.author.username }}</div>
                </div>

                <h3 class="blogCard__title text-18 fw-500 mt-10">{{ post.title }}</h3>
              </div>
            </a>
          </div>
          {% endfor %}

        </div>
      </div>
    </section>
    {% endif %}

{% endblock %}

{% block extra_js %}
<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<!-- Initialize all sliders -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Helper to parse slidesPerView from data attribute like "xl-8 lg-5 md-4 sm-3 base-2"
    function getBreakpoints(classes) {
        const parts = classes.split(' ');
        const bp = {
            320: 2,   // base
            576: 3,   // sm
            768: 4,   // md
            992: 5,   // lg
            1200: 8   // xl
        };
        parts.forEach(p => {
            const [size, val] = p.split('-');
            const num = parseInt(val);
            if (size === 'base') bp[320] = num;
            if (size === 'sm') bp[576] = num;
            if (size === 'md') bp[768] = num;
            if (size === 'lg') bp[992] = num;
            if (size === 'xl') bp[1200] = num;
        });
        return {
            320: { slidesPerView: bp[320], spaceBetween: 20 },
            576: { slidesPerView: bp[576], spaceBetween: 30 },
            768: { slidesPerView: bp[768], spaceBetween: 30 },
            992: { slidesPerView: bp[992], spaceBetween: 36 },
            1200: { slidesPerView: bp[1200], spaceBetween: 36 }
        };
    }

    const sliders = document.querySelectorAll('.js-section-slider');
    sliders.forEach(slider => {
        if (slider.swiper) return; // prevent double init

        const cols = slider.dataset.sliderCols || 'xl-8 lg-5 md-4 sm-3 base-2';
        const gap = parseInt(slider.dataset.gap) || 36;
        const navPrev = slider.dataset.navPrev ? '.' + slider.dataset.navPrev : null;
        const navNext = slider.dataset.navNext ? '.' + slider.dataset.navNext : null;
        const paginationEl = slider.dataset.pagination ? '.' + slider.dataset.pagination : null;

        new Swiper(slider, {
            slidesPerView: 'auto',
            spaceBetween: gap,
            breakpoints: getBreakpoints(cols),
            navigation: {
                prevEl: navPrev ? slider.closest('.relative')?.querySelector(navPrev) : null,
                nextEl: navNext ? slider.closest('.relative')?.querySelector(navNext) : null,
            },
            pagination: paginationEl ? {
                el: paginationEl,
                clickable: true,
            } : false,
            touchRatio: 1,
            simulateTouch: true,
        });
    });
});
</script>

<!-- Video control functions -->
<script>
function toggleMute() {
    const video = document.getElementById('mainVideo');
    const btn = document.getElementById('muteBtn');
    video.muted = !video.muted;
    btn.innerHTML = video.muted ? '<i class="fas fa-volume-mute"></i>' : '<i class="fas fa-volume-up"></i>';
}

function toggleFullscreen() {
    const container = document.querySelector('.video-container');
    const fullscreenBtn = document.getElementById('fullscreenBtn');
    
    if (!document.fullscreenElement) {
        if (container.requestFullscreen) {
            container.requestFullscreen();
        } else if (container.webkitRequestFullscreen) {
            container.webkitRequestFullscreen();
        } else if (container.msRequestFullscreen) {
            container.msRequestFullscreen();
        }
        fullscreenBtn.innerHTML = '<i class="fas fa-compress"></i>';
    } else {
        if (document.exitFullscreen) {
            document.exitFullscreen();
        } else if (document.webkitExitFullscreen) {
            document.webkitExitFullscreen();
        } else if (document.msExitFullscreen) {
            document.msExitFullscreen();
        }
        fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i>';
    }
}

// Fix for fullscreen exit reflow
document.addEventListener('fullscreenchange', () => {
    if (!document.fullscreenElement) {
        window.scrollTo(window.scrollX, window.scrollY);
        document.body.style.display = 'none';
        document.body.offsetHeight; // force reflow
        document.body.style.display = '';
    }
});
</script>
{% endblock %}