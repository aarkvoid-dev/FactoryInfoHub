{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}FactoryHub Admin{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'admin_interface/css/admin.css' %}">
</head>
{% block extra_css %} {% endblock %}
<body>
    <div class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
    </div>

    <div class="sidebar" id="adminSidebar">
        <div class="sidebar-header">
            <a href="{% url 'home' %}" >
                <h3>FashionChemistry</h3>
            </a>
            <p>Admin Dashboard</p>
        </div>

        <div class="sidebar-menu">
            <a href="{% url 'admin_interface:admin_dashboard' %}" class="sidebar-item active" data-page="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
            <a href="{% url 'admin_interface:admin_users' %}" class="sidebar-item" data-page="users">
                <i class="fas fa-users"></i>
                <span>Users</span>
            </a>
             <a href="{% url 'admin_interface:admin_blogs' %}" class="sidebar-item" data-page="blogs">
                <i class="fas fa-blog"></i>
                <span>Blogs</span>
            </a>
            
            <a href="{% url 'admin_interface:admin_factories' %}" class="sidebar-item" data-page="factories">
                <i class="fas fa-industry"></i>
                <span>Factories</span>
            </a>
            <a href="{% url 'admin_interface:admin_workers' %}" class="sidebar-item" data-page="workers">
                <i class="fas fa-user-tie"></i>
                <span>Workers</span>
            </a>
            <a href="{% url 'admin_interface:admin_reports' %}" class="sidebar-item" data-page="reports">
                <i class="fas fa-chart-bar"></i>
                <span>Reports</span>
            </a>
            <a href="{% url 'admin_interface:admin_notifications' %}" class="sidebar-item" data-page="notifications">
                <i class="fas fa-bell"></i>
                <span>Notifications</span>
                <span class="notification-badge">3</span>
            </a>
            <a href="{% url 'admin_interface:admin_contacts' %}" class="sidebar-item" data-page="contacts">
                <i class="fas fa-envelope"></i>
                <span>Contact Messages</span>
                {% if unread_count > 0 %}
                <span class="notification-badge">{{ unread_count }}</span>
                {% endif %}
            </a>
            <a href="{% url 'admin_interface:admin_faq' %}" class="sidebar-item" data-page="faq">
                <i class="fas fa-question-circle"></i>
                <span>FAQ Management</span>
            </a>
            
            <a href="{% url 'admin_interface:admin_homepage_videos' %}" class="sidebar-item" data-page="videos">
                <i class="fas fa-video"></i>
                <span>Home Page Videos</span>
            </a>
            
            <!-- Location Management Section -->
            <div class="sidebar-divider"></div>
            <div class="sidebar-section-header">
                <i class="fas fa-map-marker-alt"></i>
                <span>Location Management</span>
            </div>
            <a href="{% url 'admin_interface:admin_locations' %}" class="sidebar-item" data-page="locations">
                <i class="fas fa-globe"></i>
                <span>Locations</span>
            </a>
            <a href="{% url 'admin_interface:admin_countries' %}" class="sidebar-item" data-page="countries">
                <i class="fas fa-flag"></i>
                <span>Countries</span>
            </a>
            <a href="{% url 'admin_interface:admin_states' %}" class="sidebar-item" data-page="states">
                <i class="fas fa-landmark"></i>
                <span>States</span>
            </a>
            <a href="{% url 'admin_interface:admin_cities' %}" class="sidebar-item" data-page="cities">
                <i class="fas fa-city"></i>
                <span>Cities</span>
            </a>
            <a href="{% url 'admin_interface:admin_districts' %}" class="sidebar-item" data-page="districts">
                <i class="fas fa-building"></i>
                <span>Districts</span>
            </a>
            <a href="{% url 'admin_interface:admin_regions' %}" class="sidebar-item" data-page="regions">
                <i class="fas fa-map"></i>
                <span>Regions</span>
            </a>
            
            <!-- Category Management Section -->
            <div class="sidebar-divider"></div>
            <div class="sidebar-section-header">
                <i class="fas fa-tags"></i>
                <span>Category Management</span>
            </div>
            <a href="{% url 'admin_interface:admin_categories' %}" class="sidebar-item" data-page="categories">
                <i class="fas fa-layer-group"></i>
                <span>Categories</span>
            </a>
            <a href="{% url 'admin_interface:admin_subcategories' %}" class="sidebar-item" data-page="subcategories">
                <i class="fas fa-tags"></i>
                <span>Subcategories</span>
            </a>
           
            <div class="sidebar-divider"></div>
            <a href="{% url 'admin_interface:admin_profile' %}" class="sidebar-item" data-page="profile">
                <i class="fas fa-user-cog"></i>
                <span>Profile</span>
            </a>
            <a href="{% url 'logout' %}" class="sidebar-item text-danger" data-page="logout">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </a>
        </div>

        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="user-details">
                    <h4>Admin User</h4>
                    <p>Super Administrator</p>
                </div>
            </div>
        </div>
    </div>

    <div class="dashboard__content" id="adminContent">
        <div class="dashboard__content_header fade-in">
            <h1>{% block header %}Dashboard Overview{% endblock %}</h1>
            <div class="header-actions">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search users, factories, reports...">
                </div>
                <div class="notification-bell">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge">3</span>
                </div>
                <button class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    <span>New Report</span>
                </button>
            </div>
        </div>

        {% block content %}{% endblock %}

        <div class="admin-footer">
            <p>Â© 2024 FactoryHub Admin Panel. All rights reserved.</p>
            <p class="text-muted">v2.1.0 | Last updated: Today</p>
        </div>
    </div>


    {% block extra_js %} {% endblock %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const menuToggle = document.getElementById('menuToggle');
            const adminSidebar = document.getElementById('adminSidebar');
            const adminContent = document.getElementById('adminContent');

            menuToggle.addEventListener('click', function(e) {
                e.stopPropagation(); // Prevent click from bubbling to document
                adminSidebar.classList.toggle('show');
                adminContent.style.marginLeft = adminSidebar.classList.contains('show') ? '300px' : '0';
                menuToggle.style.left = adminSidebar.classList.contains('show') ? '320px' : '20px';
            });

            // Close sidebar when clicking outside on mobile
            document.addEventListener('click', function(event) {
                if (window.innerWidth <= 768) {
                    if (!adminSidebar.contains(event.target) && !menuToggle.contains(event.target)) {
                        adminSidebar.classList.remove('show');
                        adminContent.style.marginLeft = '0';
                        menuToggle.style.left = '20px';
                    }
                }
            });

            // Sidebar item click handler
            const sidebarItems = document.querySelectorAll('.sidebar-item');
            const currentPage = window.location.pathname.split('/').pop() || 'dashboard';

            sidebarItems.forEach(item => {
                // Set active based on current page
                const itemPage = item.getAttribute('data-page');
                if (itemPage === currentPage || 
                    (currentPage === '' && itemPage === 'dashboard') ||
                    (currentPage === 'admin_dashboard' && itemPage === 'dashboard')) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }

                // Add click animation
                item.addEventListener('click', function(e) {
                    if (this.classList.contains('active')) return;

                    // Remove active class from all items
                    sidebarItems.forEach(i => i.classList.remove('active'));

                    // Add active class to clicked item
                    this.classList.add('active');

                    // Add click animation
                    this.style.animation = 'none';
                    setTimeout(() => {
                        this.style.animation = 'fadeIn 0.3s ease';
                    }, 10);

                    // If on mobile, close sidebar after click
                    if (window.innerWidth <= 768) {
                        setTimeout(() => {
                            adminSidebar.classList.remove('show');
                            adminContent.style.marginLeft = '0';
                            menuToggle.style.left = '20px';
                        }, 300);
                    }
                });
            });

            // Search functionality
            const searchInput = document.querySelector('.search-box input');
            searchInput.addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                // Implement search logic here
                console.log('Searching for:', searchTerm);
            });

            // Notification bell click
            const notificationBell = document.querySelector('.notification-bell');
            notificationBell.addEventListener('click', function() {
                // Show notifications dropdown or page
                window.location.href = "{% url 'admin_interface:admin_notifications' %}";
            });

            // Add hover effects to cards
            const statCards = document.querySelectorAll('.stat-card');
            statCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.zIndex = '10';
                });
                card.addEventListener('mouseleave', function() {
                    this.style.zIndex = '1';
                });
            });

            // Window resize handler
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) {
                    adminSidebar.classList.remove('show');
                    adminContent.style.marginLeft = '280px';
                    menuToggle.style.display = 'none';
                } else {
                    menuToggle.style.display = 'flex';
                    adminContent.style.marginLeft = '0';
                }
            });

            // Initialize based on window size
            if (window.innerWidth <= 768) {
                menuToggle.style.display = 'flex';
                adminContent.style.marginLeft = '0';
            }
        });
    </script>
    <style>
        /* Sidebar Header Container */
        .sidebar-header {
            padding: 1.5rem 1rem;
            background-color: #1e293b;  /* Dark blue-gray */
            border-bottom: 1px solid #334155;
            text-align: center;
        }

        /* Logo / Title Link */
        .sidebar-header a {
            text-decoration: none;
            display: inline-block;
            transition: opacity 0.2s ease;
        }

        .sidebar-header a:hover {
            opacity: 0.8;
        }

        /* FactoryHub Heading */
        .sidebar-header h3 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 600;
            color: #10b981;             /* Emerald green */
            letter-spacing: 0.5px;
            text-transform: uppercase;
            line-height: 1.2;
        }

        /* Admin Dashboard Subtitle */
        .sidebar-header p {
            margin: 0.5rem 0 0;
            font-size: 0.9rem;
            color: #94a3b8;             /* Light slate */
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
    </style>
</body>
</html>