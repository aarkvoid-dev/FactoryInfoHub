{% extends 'karkahan/base.html' %}
{% load static %}

{% block title %}Delete Factory{% endblock %}

{% block factory_content %}
<div class="row y-gap-30 justify-center">
    <div class="col-12 col-lg-8">
        <div class="bg-white rounded-12 shadow-1 p-50">
            <!-- Warning Icon -->
            <div class="text-center mb-30">
                <div class="size-80 rounded-full bg-error-1 d-flex items-center justify-center mx-auto">
                    <i class="icon-alert-triangle text-error-2 text-40"></i>
                </div>
                <h1 class="text-30 fw-700 mt-20">Confirmation Required</h1>
                <p class="text-16 text-light-2 mt-10">This action cannot be undone</p>
            </div>

            <!-- Warning Message -->
            <div class="bg-error-1 rounded-12 p-20 mb-30">
                <div class="d-flex items-start">
                    <i class="icon-alert-circle text-error-2 text-20 mt-5 mr-15 flex-shrink-0"></i>
                    <div>
                        <h4 class="text-16 fw-700 text-error-2 mb-5">Warning!</h4>
                        <p class="text-14 text-error-2 mb-0">
                            This action cannot be undone. Deleting this factory will permanently remove all associated data.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Factory Details -->
            <div class="mb-30">
                <h3 class="text-20 fw-700 mb-20">Factory Details</h3>
                <div class="row y-gap-15">
                    <div class="col-12">
                        <div class="d-flex items-center">
                            <span class="text-14 text-light-2 min-w-150">Factory Name:</span>
                            <span class="fw-500 text-16">{{ factory.name }}</span>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="d-flex items-center">
                            <span class="text-14 text-light-2 min-w-150">Category:</span>
                            <span class="fw-500">{{ factory.category.name }}</span>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="d-flex items-center">
                            <span class="text-14 text-light-2 min-w-150">Location:</span>
                            <span class="fw-500">{{ factory.city.name }}, {{ factory.state.name }}</span>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="d-flex items-center">
                            <span class="text-14 text-light-2 min-w-150">Status:</span>
                            <span class="{% if factory.is_active %}text-green-2{% else %}text-light-2{% endif %} fw-500">
                                {% if factory.is_active %}Active{% else %}Inactive{% endif %}
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="d-flex items-center justify-center x-gap-15 mb-40">
                <a href="{% url 'karkahan:factory_list' %}" class="button -md -outline-border px-40">
                    <i class="icon-arrow-left mr-10"></i>
                    Cancel
                </a>
                <button type="button" class="button -md -red-1 text-white px-40" id="delete-btn">
                    <i class="icon-trash mr-10"></i>
                    Delete Factory
                </button>
            </div>

            <!-- Important Notes -->
            <div class="bg-light-1 rounded-12 p-30 mb-30">
                <h4 class="text-18 fw-700 mb-15">
                    <i class="icon-info text-accent-1 mr-10"></i>
                    Important Notes
                </h4>
                
                <div class="mb-20">
                    <h5 class="text-16 fw-600 mb-10">Before You Delete:</h5>
                    <ul class="ulList2 text-14">
                        <li>This action is irreversible</li>
                        <li>All factory data will be permanently deleted</li>
                        <li>Consider deactivating instead if you might need this data later</li>
                        <li>Make sure no other systems depend on this factory</li>
                    </ul>
                </div>

                <div>
                    <h5 class="text-16 fw-600 mb-10">Alternative Actions:</h5>
                    <div class="d-flex x-gap-10">
                        <a href="{% url 'karkahan:factory_edit' slug=factory.slug %}" class="button -sm -outline-accent-1">
                            <i class="icon-edit mr-5"></i>
                            Edit
                        </a>
                        <a href="{% url 'karkahan:factory_detail' slug=factory.slug %}" class="button -sm -outline-blue-1">
                            <i class="icon-eye mr-5"></i>
                            View
                        </a>
                        <a href="{% url 'karkahan:factory_list' %}" class="button -sm -outline-border">
                            <i class="icon-list mr-5"></i>
                            All Factories
                        </a>
                    </div>
                </div>
            </div>

            <!-- Delete Form (Hidden) -->
            <form id="delete-form" method="post" action="{% url 'karkahan:factory_delete' slug=factory.slug %}" style="display: none;">
                {% csrf_token %}
                <button type="submit">Delete Factory</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const deleteBtn = document.getElementById('delete-btn');
    const deleteForm = document.getElementById('delete-form');
    
    if (deleteBtn && deleteForm) {
        deleteBtn.addEventListener('click', function() {
            if (confirm('Are you absolutely sure you want to delete this factory?\n\nThis action cannot be undone and all data will be permanently lost.')) {
                deleteForm.submit();
            }
        });
    }
});
</script>
{% endblock %}